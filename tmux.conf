# .tmux.conf
# http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/tmux.1?query=tmux&sec=1

# -----------------------------------------------------------------------------
# Appearance
# -----------------------------------------------------------------------------

#set -g status-interval 2
#set -g status-left-length 120
#set -g status-right-length 15

#set -g status-left 'host:#H | session:#S | window :#W:#T:#I | pane:#P | '
#set -g status-right '%a %m/%d %H:%M  '

# COLOUR (Solarized dark)
# https://github.com/altercation/solarized/blob/master/tmux/tmuxcolors-dark.conf

# default statusbar colors
set-option -g status-bg black #base02
set-option -g status-fg yellow #yellow
set-option -g status-attr bright

# default window title colors
set-window-option -g window-status-fg brightblue #base0
set-window-option -g window-status-bg default
#set-window-option -g window-status-attr dim

# active window title colors
set-window-option -g window-status-current-fg brightred #orange
set-window-option -g window-status-current-bg default
#set-window-option -g window-status-current-attr bright

# pane border
set-option -g pane-border-fg black #base02
set-option -g pane-active-border-fg brightgreen #base01

# message text
set-option -g message-bg black #base02
set-option -g message-fg brightred #orange

# pane number display
set-option -g display-panes-active-colour blue #blue
set-option -g display-panes-colour brightred #orange

# clock
set-window-option -g clock-mode-colour green #green

# -----------------------------------------------------------------------------
# Option
# -----------------------------------------------------------------------------
# address vim mode switching delay (http://superuser.com/a/252717/65504)
set -sg escape-time 0

# upgrade $TERM
set -g default-terminal 'screen-256color'

# tmuxinator
set-option -g base-index 1
set-window-option -g pane-base-index 1

# enable mouse with copy mode
set-option        -g mouse  on

# message
set-option        -g display-time    3000

set-option        -g buffer-limit    100000
set-option        -g history-limit   100000

# -----------------------------------------------------------------------------
# Clipboard
# -----------------------------------------------------------------------------
set -g default-command 'sh ${HOME}/.tmux/tmux-default-command'

# -----------------------------------------------------------------------------
# Keybindings
# -----------------------------------------------------------------------------
set-window-option -g mode-keys vi

# Prefix
# --------------------------------------
unbind-key C-b
set-option -g prefix C-t
bind C-t send-prefix

# window
# --------------------------------------
bind C-Space next-window
bind C-t  choose-window
bind C-n  new-window -c "#{pane_current_path}"
bind K    confirm-before kill-window

unbind C-w
#bind   C-w choose-window

bind 1    break-pane
bind 2    split-window -c "#{pane_current_path}" -v
bind 3    split-window -c "#{pane_current_path}" -h


# pane
# --------------------------------------
bind -r s swap-pane -U

# select pane
# --------------------------------------
bind -r j select-pane -D
bind -r h select-pane -L
bind -r l select-pane -R

# resize pane
# --------------------------------------
bind -r C-left   resize-pane -L 6
bind -r C-right  resize-pane -R 6
bind -r C-down   resize-pane -D 6
bind -r C-up     resize-pane -U 6

unbind  k        # unbind kill pane with k

bind -r C-h        resize-pane -L 6
bind -r C-l        resize-pane -R 6
bind -r C-j        resize-pane -D 6
bind -r C-k        resize-pane -U 6

# edit
# --------------------------------------
bind i    display-panes
bind C-q  copy-mode
bind p    paste-buffer -r

bind-key -t vi-copy v begin-selection
bind-key -t vi-copy y copy-pipe 'reattach-to-user-namespace pbcopy'
unbind-key -t vi-copy Enter
bind-key -t vi-copy Enter copy-pipe 'reattach-to-user-namespace pbcopy'

bind-key p paste-buffer
bind-key -t vi-copy Escape clear-selection
bind-key -t vi-copy C-c cancel
bind-key -t vi-copy C-v rectangle-toggle
bind-key -t vi-copy V select-line
bind-key -t vi-copy C-a start-of-line
bind-key -t vi-copy C-e end-of-line
bind-key -t vi-copy Home start-of-line
bind-key -t vi-copy End end-of-line

# 単語の最初の1文字に移動
bind-key -t vi-copy w next-word
# 単語の最後の1文字に移動
bind-key -t vi-copy e next-word-end
# w の逆の動き back
bind-key -t vi-copy b previous-word

# 画面上に映る最上行に移動
bind-key -t vi-copy g top-line
# 画面上に映る最下行に移動
bind-key -t vi-copy G bottom-line


# toggle synchronize-panes
bind s set -g synchronize-panes

# misc
# --------------------------------------
bind H    list-keys
bind r  source-file ~/.tmux.conf \; \
          display-message 'reloaded source file ~/.tmux.conf'

# plugins
# --------------------------------------
# List of plugins
set -g @plugin 'tmux-plugins/tpm'

set -g @plugin 'tmux-plugins/tmux-resurrect'
set -g @resurrect-dir '~/.tmux/local/resurrect'

set -g @plugin 'tmux-plugins/tmux-continuum'
set -g @continuum-restore 'on'

run '~/.tmux/plugins/tpm/tpm'

